!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("simple-uuidv4")):"function"==typeof define&&define.amd?define(["exports","simple-uuidv4"],n):n((e=e||self).DayiWidget={},e.simpleUUIdv4)}(this,function(e,n){"use strict";function t(e,n,t,i,a,o,r,c,l,s){"boolean"!=typeof r&&(l=c,c=r,r=!1);var d,p,u="function"==typeof t?t.options:t;return e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,a&&(u.functional=!0)),i&&(u._scopeId=i),o?u._ssrRegister=d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)}:n&&(d=r?function(e){n.call(this,s(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,c(e))}),d&&(u.functional?(p=u.render,u.render=function(e,n){return d.call(n),p(e,n)}):(r=u.beforeCreate,u.beforeCreate=r?[].concat(r,d):[d])),t}var a,i={name:"FundTransferDialog",props:{showDialog:Boolean,dialogTitle:String},computed:{show:{get:function(){return!!this.showDialog},set:function(e){this.$emit("update:showDialog",e)}}}},o=function(){var n=this,e=n.$createElement,e=n._self._c||e;return e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],attrs:{visible:n.show,"append-to-body":"","close-on-click-modal":!1,center:"",title:n.dialogTitle},on:{"update:visible":function(e){n.show=e}}},[e("el-form",{ref:"fundTransferForm",staticClass:"inline-form",attrs:{model:n.widthdrawInfo}},[e("el-row",[e("el-col",[e("el-form-item",{attrs:{label:"转出虚户名称",prop:"outer.accountInfo"}},[e("el-input",{model:{value:n.widthdrawInfo.outer.accountInfo,callback:function(e){n.$set(n.widthdrawInfo.outer,"accountInfo",e)},expression:"widthdrawInfo.outer.accountInfo"}})],1)],1),n._v(" "),e("el-col",[e("el-form-item",{attrs:{label:"选择转出账户",prop:"outer.accountInfo"}},[e("el-input",{model:{value:n.widthdrawInfo.outer.accountInfo,callback:function(e){n.$set(n.widthdrawInfo.outer,"accountInfo",e)},expression:"widthdrawInfo.outer.accountInfo"}})],1)],1),n._v(" "),e("el-col",[e("el-form-item",{attrs:{label:"转出虚户名称",prop:"outer.accountInfo"}},[e("el-input",{model:{value:n.widthdrawInfo.outer.accountInfo,callback:function(e){n.$set(n.widthdrawInfo.outer,"accountInfo",e)},expression:"widthdrawInfo.outer.accountInfo"}})],1)],1),n._v(" "),e("el-col",[e("el-form-item",{attrs:{label:"转出虚户名称",prop:"outer.accountInfo"}},[e("el-input",{model:{value:n.widthdrawInfo.outer.accountInfo,callback:function(e){n.$set(n.widthdrawInfo.outer,"accountInfo",e)},expression:"widthdrawInfo.outer.accountInfo"}})],1)],1)],1)],1)],1)},r=(o._withStripped=!0,t({render:o,staticRenderFns:[]},void 0,i,void 0,!1,void 0,!1,void 0,void 0,void 0)),c={type:{type:String,default:"text"},label:{type:String,default:"按钮",required:!0},size:{type:String,default:"small"},plain:Boolean,round:Boolean,circle:Boolean,disabled:Boolean,icon:String},l=Object.assign({},c,r.props,{loadingMask:Boolean,buttonData:{type:Object,default:function(){return{}}},buttonClass:String}),s={name:"FundTransferButton",uuid:n.uuid(),components:{fundTransferDialog:r},props:l,data:function(){return{loadig:!1,buttonLoading:!1,showDialog:!1}},methods:{handleButtonClick:function(){this.showDialog=!0}}},d=function(){var n=this,e=n.$createElement,e=n._self._c||e;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loadingMask&&n.loading,expression:"loadingMask && loading"}],class:n.buttonClass},[e("el-button",{attrs:{type:n.type,loading:n.buttonLoading,size:n.size,plain:n.plain,round:n.round,circle:n.circle,disabled:n.disabled,icon:n.icon},on:{click:n.handleButtonClick}},[n._v(n._s(n.label))]),n._v(" "),e("fund-transfer-dialog",{attrs:{showDialog:n.showDialog},on:{"update:showDialog":function(e){n.showDialog=e},"update:show-dialog":function(e){n.showDialog=e}}})],1)},p=(d._withStripped=!0,t({render:d,staticRenderFns:[]},void 0,s,void 0,!1,void 0,!1,void 0,void 0,void 0)),u={name:"log",props:{className:String,loadPoint:Array,unloadPoint:Array,loadRule:Function,unloadRule:Function,amap:Object}},f="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function v(e){return function(e,n){var t,i;t=e,i=n,e=f?i.media||"default":t,(n=A[e]||(A[e]={ids:new Set,styles:[]})).ids.has(t)||(n.ids.add(t),e=i.source,i.map&&(e+="\n/*# sourceURL="+i.map.sources[0]+" */",e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",i.media&&n.element.setAttribute("media",i.media),(a=void 0===a?document.head||document.getElementsByTagName("head")[0]:a).appendChild(n.element)),"styleSheet"in n.element?(n.styles.push(e),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n")):(t=n.ids.size-1,i=document.createTextNode(e),(e=n.element.childNodes)[t]&&n.element.removeChild(e[t]),e.length?n.element.insertBefore(i,e[t]):n.element.appendChild(i)))}}var A={};function h(n){return n.amapResolve?(n.containerResolve||(n.containerResolve=n.amapResolve.then(function(e){var t=new e.Map(n.amapId,{center:m,zoom:11});return new Promise(function(e,n){t.on("complete",function(){e(t)})})})),Promise.resolve("ok")):Promise.reject("null amap")}function g(e){return e.amap?(e.amapResolve||(e.amapResolve=Promise.resolve(e.amap)),e.amapResolve):Promise.reject("amap is not prepared")}var o=u,i=function(){var e=this,n=e.$createElement,n=e._self._c||n;return n("div",{staticClass:"log"},[n("div",[e._v("className:"+e._s(e.className))]),e._v(" "),n("div",[e._v("logPoint:"+e._s(e.logPoint))]),e._v(" "),n("div",[e._v("unloadPoint:"+e._s(e.unloadPoint))]),e._v(" "),n("div",[e._v("loadRule:"+e._s(e.loadRule))]),e._v(" "),n("div",[e._v("unloadRule:"+e._s(e.unloadRule))]),e._v(" "),n("div",[e._v("amap:"+e._s(e.amap))])])},c=(i._withStripped=!0,t({render:i,staticRenderFns:[]},function(e){e&&e("data-v-627e1c07_0",{source:"\ndiv.log[data-v-627e1c07] {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n",map:{version:3,sources:["/media/liuhanru/mywork/apps/dayi/admin-widget/src/waybill/components/log.vue"],names:[],mappings:";AA0BA;EACA,aAAA;EACA,sBAAA;EACA,uBAAA;AACA",file:"log.vue",sourcesContent:["<template>\n<div class=\"log\">\n  <div>className:{{className}}</div>\n  <div>logPoint:{{logPoint}}</div>\n  <div>unloadPoint:{{unloadPoint}}</div>\n  <div>loadRule:{{loadRule}}</div>\n  <div>unloadRule:{{unloadRule}}</div>\n  <div>amap:{{amap}}</div>\n</div>\n</template>\n\n<script>\nexport default {\n  name:'log',\n  props:{\n    className:String,\n    loadPoint:Array,\n    unloadPoint:Array,\n    loadRule:Function,\n    unloadRule:Function,\n    amap:Object,\n  },\n}\n<\/script>\n\n<style scoped>\ndiv.log {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n</style>"]},media:void 0})},o,"data-v-627e1c07",!1,void 0,!1,v,void 0,void 0)),m=[116.397423,39.909117],y={pathType:{union:0,driver:1,vehicle:2,full:3},pointType:{app:1,zjxl:2,selfGPS:3,mmsi:4,handle5:5,handle6:6},lorryType:{lorry:"lorry",boat:"boat"},deviceMapping:{1:"APP",2:"辅助设备",3:"辅助设备",4:"辅助设备",5:"APP",6:"App"}},b={defaultKeyOfPoint:function(e,n,t){return void 0===t&&(t=""),[n=void 0===n?"":n,e[0].toFixed(4),e[1].toFixed(4),t].filter(function(e){return!!e}).join("/")}},l=function(e){void 0===e&&(e=b.defaultKeyOfPoint),b.handler=e};l();function w(e,n,t){return b.handler(e,n,t)}function k(e,n,t){return(e=void 0===e?0:e)<=1e4?[t,Object.assign({type:"circle",radius:3e3},n)]:e<=3e4?[t,Object.assign({type:"circle",radius:4e3},n)]:e<1e5?[t,Object.assign({type:"district"},n,{fillOpacity:.4}),Object.assign({type:"circle",radius:5e3},n)]:[t,Object.assign({type:"district"},n,{fillOpacity:.4}),Object.assign({type:"circle",radius:1e4},n)]}function x(e){return k(e=void 0===e?0:e,{fillColor:"#37A80040",strokeColor:"#37A80080",fillOpacity:.5,strokeOpacity:.5},{image:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='56px' height='56px' viewBox='0 0 56 56' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3ctitle%3e%e7%bc%96%e7%bb%84 10%3c/title%3e %3cg id='2020.04.03--%e5%9c%b0%e5%9b%be%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='A4-1--2-%e8%bf%90%e5%8d%95%e8%bd%a8%e8%bf%b9-%e5%ae%9e%e6%97%b6%e8%bd%a8%e8%bf%b9' transform='translate(-747.000000%2c -654.000000)'%3e %3cg id='%e7%bc%96%e7%bb%84-10' transform='translate(747.000000%2c 654.000000)'%3e %3cpath d='M3.02083333%2c25.0568182 C1.36397908%2c25.0568182 0.0208333333%2c23.7136724 0.0208333333%2c22.0568182 L0.0208333333%2c3 C0.0208333333%2c1.34314575 1.36397908%2c-1.53269159e-12 3.02083333%2c-1.53299595e-12 L52.1458333%2c-1.53299595e-12 C53.8026876%2c-1.52888557e-12 55.1458333%2c1.34314575 55.1458333%2c3 L55.1458333%2c22.0568182 C55.1458333%2c23.7136724 53.8026876%2c25.0568182 52.1458333%2c25.0568182 L32.5265152%2c25.0568182 L27.5833333%2c30 L22.6401515%2c25.0568182 L3.02083333%2c25.0568182 Z' id='%e5%bd%a2%e7%8a%b6%e7%bb%93%e5%90%88' fill='%2337A800'%3e%3c/path%3e %3ctext id='%e8%a3%85%e8%b4%a7%e5%9c%b0' font-family='PingFang-SC-Heavy%2c PingFang SC' font-size='14' font-weight='600' line-spacing='13' letter-spacing='-1.07692308' fill='white'%3e %3ctspan x='8.08333333' y='16.5284091'%3e%e8%a3%85%e8%b4%a7%e5%9c%b0%3c/tspan%3e %3c/text%3e %3c/g%3e %3c/g%3e %3c/g%3e %3cg id='2020.04.03--%e5%9c%b0%e5%9b%be%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='A4-1--2-%e8%bf%90%e5%8d%95%e8%bd%a8%e8%bf%b9-%e5%ae%9e%e6%97%b6%e8%bd%a8%e8%bf%b9' transform='translate(-764.000000%2c -689.000000)' fill-rule='nonzero'%3e %3cg id='%e7%bc%96%e7%bb%84-15' transform='translate(764.000000%2c 689.000000)'%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%23BBE8A7' cx='28' cy='45' r='11'%3e%3c/circle%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2' fill='%2337A800' cx='28' cy='45' r='6'%3e%3c/circle%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e",size:[56,56],offset:[-28,-45],type:"marker"})}function C(e){return k(e=void 0===e?0:e,{fillColor:"#E0202040",strokeColor:"#E0202080",fillOpacity:.5,strokeOpacity:.5},{image:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='56px' height='56px' viewBox='0 0 56 56' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3ctitle%3e%e7%bc%96%e7%bb%84 10%3c/title%3e %3cg id='2020.04.03--%e5%9c%b0%e5%9b%be%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='A4-1--2-%e8%bf%90%e5%8d%95%e8%bd%a8%e8%bf%b9-%e5%ae%9e%e6%97%b6%e8%bd%a8%e8%bf%b9' transform='translate(-331.000000%2c -1026.000000)'%3e %3cg id='%e7%bc%96%e7%bb%84-10' transform='translate(331.476117%2c 1026.748301)'%3e %3cpath d='M3.02083333%2c25.0568182 C1.36397908%2c25.0568182 0.0208333333%2c23.7136724 0.0208333333%2c22.0568182 L0.0208333333%2c3 C0.0208333333%2c1.34314575 1.36397908%2c-1.53269159e-12 3.02083333%2c-1.53299595e-12 L52.1458333%2c-1.53299595e-12 C53.8026876%2c-1.53330031e-12 55.1458333%2c1.34314575 55.1458333%2c3 L55.1458333%2c22.0568182 C55.1458333%2c23.7136724 53.8026876%2c25.0568182 52.1458333%2c25.0568182 L32.5265152%2c25.0568182 L27.5833333%2c30 L22.6401515%2c25.0568182 L3.02083333%2c25.0568182 Z' id='%e5%bd%a2%e7%8a%b6%e7%bb%93%e5%90%88' fill='%23E02020'%3e%3c/path%3e %3ctext id='%e5%8d%b8%e8%b4%a7%e5%9c%b0' font-family='PingFang-SC-Heavy%2c PingFang SC' font-size='14' font-weight='600' line-spacing='13' letter-spacing='-1.07692308' fill='white'%3e %3ctspan x='8.08333333' y='16.5284091'%3e%e5%8d%b8%e8%b4%a7%e5%9c%b0%3c/tspan%3e %3c/text%3e %3c/g%3e %3c/g%3e %3c/g%3e %3cg id='2020.04.03--%e5%9c%b0%e5%9b%be%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='A4-1--2-%e8%bf%90%e5%8d%95%e8%bd%a8%e8%bf%b9-%e5%ae%9e%e6%97%b6%e8%bd%a8%e8%bf%b9' transform='translate(-348.000000%2c -1060.000000)' fill-rule='nonzero'%3e %3cg id='%e7%bc%96%e7%bb%84-40' transform='translate(348.000000%2c 1060.000000)'%3e %3ccircle id='22' fill='%23FFA6A6' cx='28' cy='45' r='11'%3e%3c/circle%3e %3ccircle id='%e6%a4%ad%e5%9c%86%e5%bd%a2%e5%a4%87%e4%bb%bd-12' fill='%23E02020' cx='28' cy='45' r='6'%3e%3c/circle%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e",size:[56,56],offset:[-28,-45],type:"marker"})}function T(e,n,t,i,a){void 0===i&&(i={});var o=""+(a=void 0===a?"":a)+G(t);Q[o]&&n.remove(Q[o]);var a=(r=i.size)[0],r=r[1],a=new e.Icon({image:i.image,size:new e.Size(a,r),imageSize:new e.Size(a,r)}),i=(r=i.offset)[0],r=r[1],a=new e.Marker({position:t.slice(),offset:new e.Pixel(i,r),icon:a,autoRotation:!0,angle:0,extData:o});return Q[o]=a,n.add(a),a}function P(n,t,i,e,a){return a=e(a).map(function(e){switch(e.type){case"province":case"city":case"district":return function(o,r,c,l){void 0===l&&(l={});var s=G(c);return new Promise(function(i,a){(new o.Geocoder).getAddress(new(Function.prototype.bind.apply(o.LngLat,[null].concat(c))),function(e,n){if(!("complete"==e&&"OK"==n.info))return a("unknown district,"+c);var t=n.regeocode.addressComponent[q[l.type]];new o.DistrictSearch({level:l.type,extensions:"all",subdistrict:0}).search(t,function(e,n){if("complete"!=e)return Promise.reject("unknown district,"+t);e=n.districtList[0];if(!e)return Promise.reject("unknown district,"+n);e=e.boundaries;H[s]&&r.remove(H[s]);e=Object.assign({},l,{type:void 0,map:r,path:e}),e=new o.Polygon(e);H[s]=e,i(e)})})})}(n,t,i,e);case"circle":return function(e,n,t,i){void 0===i&&(i={});var a=G(t);X[a]&&n.remove(X[a]);t=Object.assign({},i,{type:void 0,center:t.slice()}),t=new e.Circle(t);return X[a]=t,n.add(t),Promise.resolve(t)}(n,t,i,e);case"marker":return T(n,t,i,e);default:return[i,i]}})||[[i,i]],Promise.all(a)}function I(a){return h(a).then(function(e){return Promise.all([a.amapResolve,a.containerResolve])}).then(function(e){var n=e[0],t=e[1],i=(a.loadPoint||a.unloadPoint||W).slice(),e=(a.unloadPoint||a.loadPoint||W).slice(),i=n.GeometryUtil.distance(i,e),e=a.loadPoint&&P(n,t,a.loadPoint.slice(),a.loadRule||x,i)||[loadPoint,loadPoint],i=a.unloadPoint&&P(n,t,a.unloadPoint.slice(),a.unloadRule||C,i)||[unloadPoint,unloadPoint];return Promise.all([n,t,e,i])}).then(function(e){e[0];var n=e[1];e=n,n=a.avoid,e.setFitView(null,!0,n=void 0===n?[20,20,20,20]:n,18)})}function E(n,a,o){return void 0===a&&(a={}),void 0===o&&(o={}),h(n).then(function(e){return Promise.all([n.amapResolve,n.containerResolve])}).then(function(e){var n=e[0],t=e[1],i={};return a.lng&&a.lat&&(i.startKey=G([a.lng,a.lat]),i.start=T(n,t,[a.lng,a.lat],{image:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='41px' height='62px' viewBox='0 0 41 62' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3ctitle%3e%e7%bc%96%e7%bb%84 7%3c/title%3e %3cg id='2020.04.03--%e5%9c%b0%e5%9b%be%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='A4-1--2-%e8%bf%90%e5%8d%95%e8%bd%a8%e8%bf%b9-%e5%ae%9e%e6%97%b6%e8%bd%a8%e8%bf%b9' transform='translate(-810.000000%2c -646.000000)'%3e %3cg id='%e7%bc%96%e7%bb%84-7' transform='translate(812.866894%2c 648.000000)'%3e %3cellipse id='%e6%a4%ad%e5%9c%86%e5%bd%a2%e5%a4%87%e4%bb%bd-2' fill-opacity='0.2' fill='black' cx='18.3012368' cy='51.3314119' rx='10.5981615' ry='8.3345881'%3e%3c/ellipse%3e %3cpath d='M16.9593067%2c-0.976116808 C22.3919129%2c-1.24439367 27.3222956%2c0.761385037 30.9029773%2c4.17155805 C34.5086806%2c7.60556122 36.746576%2c12.465442 36.746576%2c17.8683295 C36.746576%2c24.0566555 33.7908519%2c29.440619 29.2157607%2c32.9392182 C24.4902463%2c36.4531751 21.450293%2c41.7668045 21.450293%2c47.6960814 L21.450293%2c47.6960814 L21.450293%2c48.4608955 C21.450293%2c49.4369752 21.0520644%2c50.3249572 20.4085193%2c50.9685023 C19.7649742%2c51.6120474 18.8769921%2c52.010276 17.9009125%2c52.010276 C16.9248329%2c52.010276 16.0368509%2c51.6120474 15.3933058%2c50.9685023 C14.7497607%2c50.3249572 14.351532%2c49.4369752 14.351532%2c48.4608955 L14.351532%2c48.4608955 L14.351532%2c47.6960814 C14.351532%2c42.0312519 11.710791%2c36.4786611 7.00671149%2c33.2219906 C1.75505514%2c29.5862285 -1.48054408%2c23.393076 -0.941097633%2c16.3807691 C-0.537957782%2c11.677471 1.60858985%2c7.44288599 4.81514677%2c4.33276687 C8.03230539%2c1.21236491 12.3142867%2c-0.774176798 16.9593067%2c-0.976116808 Z' id='%e5%bd%a2%e7%8a%b6' stroke='white' stroke-width='2' fill='%2300A19C' fill-rule='nonzero'%3e%3c/path%3e %3ctext id='%e6%8f%90%e8%b4%a7' font-family='PingFang-SC-Heavy%2c PingFang SC' font-size='14' font-weight='600' line-spacing='14' letter-spacing='-0.7' fill='white'%3e %3ctspan x='3.565288' y='23.630223'%3e%e6%8f%90%e8%b4%a7%3c/tspan%3e %3c/text%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e",size:[41,62],offset:[-21,-61]},"start")),o.lng&&o.lat&&(i.endKey=G([o.lng,o.lat]),e=i.startKey==i.endKey?10:0,i.end=T(n,t,[o.lng,o.lat],{image:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='41px' height='62px' viewBox='0 0 41 62' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3ctitle%3e%e7%bc%96%e7%bb%84 7%3c/title%3e %3cg id='2020.04.03--%e5%9c%b0%e5%9b%be%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='A4-1--2-%e8%bf%90%e5%8d%95%e8%bd%a8%e8%bf%b9-%e5%ae%9e%e6%97%b6%e8%bd%a8%e8%bf%b9' transform='translate(-385.000000%2c -1026.000000)'%3e %3cg id='%e7%bc%96%e7%bb%84-7' transform='translate(387.476117%2c 1028.000000)'%3e %3cellipse id='%e6%a4%ad%e5%9c%86%e5%bd%a2%e5%a4%87%e4%bb%bd-2' fill-opacity='0.2' fill='black' cx='18.3012368' cy='51.3314119' rx='10.5981615' ry='8.3345881'%3e%3c/ellipse%3e %3cpath d='M16.9593067%2c-0.976116808 C22.3919129%2c-1.24439367 27.3222956%2c0.761385037 30.9029773%2c4.17155805 C34.5086806%2c7.60556122 36.746576%2c12.465442 36.746576%2c17.8683295 C36.746576%2c24.0566555 33.7908519%2c29.440619 29.2157607%2c32.9392182 C24.4902463%2c36.4531751 21.450293%2c41.7668045 21.450293%2c47.6960814 L21.450293%2c47.6960814 L21.450293%2c48.4608955 C21.450293%2c49.4369752 21.0520644%2c50.3249572 20.4085193%2c50.9685023 C19.7649742%2c51.6120474 18.8769921%2c52.010276 17.9009125%2c52.010276 C16.9248329%2c52.010276 16.0368509%2c51.6120474 15.3933058%2c50.9685023 C14.7497607%2c50.3249572 14.351532%2c49.4369752 14.351532%2c48.4608955 L14.351532%2c48.4608955 L14.351532%2c47.6960814 C14.351532%2c42.0312519 11.710791%2c36.4786611 7.00671149%2c33.2219906 C1.75505514%2c29.5862285 -1.48054408%2c23.393076 -0.941097633%2c16.3807691 C-0.537957782%2c11.677471 1.60858985%2c7.44288599 4.81514677%2c4.33276687 C8.03230539%2c1.21236491 12.3142867%2c-0.774176798 16.9593067%2c-0.976116808 Z' id='%e5%bd%a2%e7%8a%b6' stroke='white' stroke-width='2' fill='%23008EDD' fill-rule='nonzero'%3e%3c/path%3e %3ctext id='%e5%8d%b8%e8%b4%a7' font-family='PingFang-SC-Heavy%2c PingFang SC' font-size='14' font-weight='600' line-spacing='14' letter-spacing='-0.7' fill='white'%3e %3ctspan x='3.565288' y='23.630223'%3e%e5%8d%b8%e8%b4%a7%3c/tspan%3e %3c/text%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e",size:[41,62],offset:[e-21,-61]},"end")),Promise.all([i.start,i.end])})}function O(e,n){return void 0===n&&(n=-1),(e=void 0===e?[]:e).filter(function(e){return e.operateTypeLm==n}).map(function(e){return Object.assign({},e,{lng:e.operateLon,lat:e.operateLat})})[0]}function B(e){var t=0;return(e=void 0===e?[]:e).reduce(function(e,n){return n.trackDistance&&14e3<n.trackDistance&&(t+=1),e[t]=e[t]||[],e[t].push(n),e},[[]])}function z(n){return h(n).then(function(e){return Promise.all([n.amapResolve,n.containerResolve])})}function R(t,i){return void 0===i&&(i="lines"),z(t).then(function(e){e[0];var n=e[1],e=J.get(t.amapResolve)||{};e[i]=e[i]||[],e[i].forEach(function(e){return n.remove(e)}),e[i]=[]})}function D(a,o,r,c){return void 0===r&&(r="#2288ff"),void 0===c&&(c="lines"),z(a).then(function(e){var t=e[0],i=e[1],n=J.get(a.amapResolve)||{};J.set(a.amapResolve,n),n[c]=n[c]||[],n[c].forEach(function(e){return i.remove(e)});e=o.map(function(e,n){e=e.slice().map(function(e){return[e.lng,e.lat]});return new t.Polyline({map:i,bubble:!0,path:e,showDir:!0,geodesic:!1,lineJoin:"round",lineCap:"round",strokeColor:r,strokeWeight:6})});return n[c]=e})}function F(d,n){return z(d).then(function(e){var c=e[0],l=e[1],s=J.get(d.amapResolve)||{};return J.set(d.amapResolve,s),n.map(function(e,n){var t,i,a=(e=void 0===e?[]:e).filter(function(e){return e.lng&&e.lat});i=l,void 0===(t=s)&&(t={}),(o=void 0===(o=e)?[]:o).filter(function(e){e=e.key||w([e.lng,e.lat]);return!!t[e]}).forEach(function(e){e=e.key||w([e.lng,e.lat]);i.remove(t[e])});var e=l.getResolution(),o=c.GeometryUtil.distanceOfLine(a.map(function(e){return[e.lng,e.lat]})),o=Math.floor(o/(30*e))||1,e=a.length,r=Math.floor(e/o)||1;return a.filter(function(e,n){return n%r==0}).map(function(e){e=function(e,n,t,i){void 0===e&&(e={});var a=new t.Icon({image:K.pass[n.origin],size:new t.Size(12,12),imageSize:new t.Size(12,12)}),o=new t.Icon({image:K.passOver[n.origin],size:new t.Size(20,20),imageSize:new t.Size(20,20)}),r=[n.lng,n.lat],c=new t.Marker({position:[n.lng,n.lat],icon:a,bubble:!0,offset:new t.Pixel(-6,-6)});return(e[n.key||w(r)]=c).trackInfo=n,c.setIcon(a),c.on("mouseover",function(e){c.setIcon(o),c.setOffset(new t.Pixel(-10,-10)),i.focusedPoint=n,ee(i,n).then(function(e){var n=e[0],e=(e[1],e[2]);n.getIsOpen()?n.setPosition(r):n.open(e,r)})}),c.on("mouseout",function(e){c.setIcon(a),c.setOffset(new t.Pixel(-6,-6)),i.focusedPoint=null,ee(i,n).then(function(e){var n=e[0];e[1],e[2];n.getIsOpen()&&n.close()})}),c.on("click",function(e){i.$emit("clickPoint",n)}),c}(s,e,c,d);return l.add(e),e})})})}function L(n,a,o){void 0===a&&(a=[]),void 0===o&&(o=1);var r={};return z(n).then(function(e){var i=e[0],t=(e[1],Z.get(n.amapResolve)||{});return Z.set(n.amapResolve,t),a.filter(function(e){var n=e.key||w([e.lng,e.lat]);return!r[n]&&(t[e.uid]=e,r[e.key]=e,!0)}).sort(function(e,n){return(e.timeSec-n.timeSec)*o}).map(function(e,n,t){return Object.assign({},e,{trackDistance:(e=e,t=t[n-1],n=i,t?n.GeometryUtil.distance([e.lng,e.lat],[t.lng,t.lat]):0)})})})}function S(e){e&&Y.has(e)&&(e=Y.get(e),clearInterval(e))}function U(o,r,c){return void 0===r&&(r=[]),void 0===c&&(c="lorry"),z(o).then(function(e){var n=e[0],t=e[1],i=_.get(o.amapResolve),a=r[0],e=[a.lng,a.lat];return _.has(o.amapResolve)||(a=K.lorry[c],(i=new n.Marker({position:e,icon:new n.Icon({image:a.image,size:new(Function.prototype.bind.apply(n.Size,[n.Size].concat(a.size))),imageSize:new(Function.prototype.bind.apply(n.Size,[n.Size].concat(a.size)))}),bubble:!0,autoRotation:!0,angle:0,offset:new(Function.prototype.bind.apply(n.Pixel,[n.Pixel].concat(a.offset))),extData:c})).on("movealong",function(e){var n,t;o.isRunning&&(n=i)&&(S(n),t=setInterval(function(){Date.now()%3e3<2500?n.show():n.hide()},100),Y.set(n,t))}),i.on("moveend",function(e){var n=Z.get(o.amapResolve)||{};Z.set(o.amapResolve,n);var t=e.target.getPosition(),n=n[w([t.lng,t.lat])];o.selectedPoint||o.focusedPoint||ee(o,n).then(function(e){var n=e[0],e=(e[1],e[2]);n.getIsOpen()?n.setPosition(t):n.open(e,t)})}),t.add(i),i.show(),_.set(o.amapResolve,i)),[i,n,t,e]})}function j(e,i,n){return U(e,i=void 0===i?[]:i,n=void 0===n?"lorry":n).then(function(e){var n=e[0],t=(e[1],e[2]),e=e[3];S(n),n.stopMove();e=t.getResolution(e);return n.moveAlong(i.map(function(e){return[e.lng,e.lat]}),100*e),n})}function M(i,e,n){void 0===n&&(n="lorry");var a=(e=void 0===e?[]:e).reverse();return U(i,a,n).then(function(e){var n=e[0],t=(e[1],e[2],e[3]);S(n),n.stopMove();e=a[0];return e&&(n.setPosition(t),ee(i,e).then(function(e){var n=e[0],e=(e[1],e[2]);n.getIsOpen()?n.setPosition(t):n.open(e,t)})),n})}function V(e,i){return ee(e,i).then(function(e){var n=e[0],t=(e[1],e[2]),e=[i.lng,i.lat];n.getIsOpen()?n.setPosition(e):n.open(t,e)})}function N(n){return z(n).then(function(){var e;return!$.has(n.amapResolve)||(e=$.get(n.amapResolve)).getIsOpen()&&e.close(),"ok"})}var d=Object.freeze({__proto__:null,prepareMap:h,callOnInitLifeCircle:g,tian_an_men:m,glossary:y,getKeyOfPoint:w,setKeyOfPointGenerator:l}),W=m,q={district:"adcode"},H={},G=w,X={},Q={},s=Object.freeze({__proto__:null,renderTheRoute:I,renderTheAction:E,findDriverAction:O}),u="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%23f5a500' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",i="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%23f5a500' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",J=new WeakMap,o=y.pointType,K={pass:((l={})[o.app]="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%2300b564' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",l[o.zjxl]="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%23eb1717' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",l[o.selfGPS]=u,l[o.mmsi]=u,l[o.handle5]="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%234b8ee6' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",l[o.handle6]="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%23a0a000' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",l),passOver:((l={})[o.app]="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%2300b564' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",l[o.zjxl]="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%23eb1717' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",l[o.selfGPS]=i,l[o.mmsi]=i,l[o.handle5]="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%234b8ee6' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",l[o.handle6]="data:image/svg+xml,%3c%3fxml version='1.0' standalone='no'%3f%3e%3csvg width='200' height='200' version='1.1' xmlns='http://www.w3.org/2000/svg'%3e %3ccircle cx='100' cy='100' r='50' stroke='%23a0a000' fill='transparent' stroke-width='100'/%3e %3ccircle cx='100' cy='100' r='75' stroke='white' fill='transparent' stroke-width='50'/%3e%3c/svg%3e",l),lorry:((l={})[y.lorryType.lorry]={image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAASCAYAAAAg9DzcAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALKADAAQAAAABAAAAEgAAAADif+FEAAAE6ElEQVRIDb1Vz2slRRCunh957yUxCTFLjEjAg3jzsoIgePKweFjXmyCLoH+AB69ePQreBI+KoIgX3YPnPbjocVFclMXFNVmIkt3gy3sz82a62++r7p5MkmVBEAtmqrq6fnxVXT1jJJLfe+t9WXvmPfFQGCOBp92zHPtD0mXUeQTo/c/YDX16mTb56+axd7/sVRAuv7h95dqNg6+HOsoa0d+69IaUKx/IhYs7asCEJIJX4loriR4ny5P9IOk7up/2j/vD2Mluvv+9zO7VKcJsZlen83ZzfWf7o8lk/LlslQ+M+bDivvE3Lr4mTr6Q7d0pAG8lp1N8mIQ1DvCrXSpM7WJhwwAJmNoN/ePG9PcDOd7fDu1LxiKffHXQvvn2c7kRnyFpI7l/urh7Z/bp7lPLI5FuIXaBNMOAMWvCkICpOgV+iP0QrHfiFk2Iy3eWiymXBhbwd86KbQe6IB49qF1XzbuyMBNoRhi15eLwb1fscu5sNxZ33im081ysM4oEPqrZ6VikbyrJRsxHCna+ngI0epROzlknbSNd04l3XvJRKRn6Kt5bu6jbUnIEQECXjQvJMhfi+FJ852EUs5OlliY5bg2Sq5jQqRl9eIJgrQXHmidnMvGLCqzULvvmGKDHATRwdfNaFtVCmN1UtSxvTMQ64J1X7dgUIU2eTwonmQ1W0HkPD4/SSQlskonA4SEnDffjntZ6InuHXhSFuAaAcer0MROA5ImqO+LRh51sF9J1OGGs0TXxLQp0zqGITpboS/diXHhhh9ERdmW0UYONNJgeF5MzMjmZBqegS32lY034kw24seyFkWxCP84yPgTjFbgDTD0XM14OMav7Cw+wtu0QknBBXU4fdLjuZAUd1rHNAdhknQIucBEyh9sRj5Nu6ZuaZAVKsD06Bg1JmSTVoRw2GQReOM6wD5dNu+6tZOi8UvB3HmNjO8xw0GI6c45E11S1FUyxYskwwz7LA+AMARxGwvDYQeyUdmsAqAce9zU87FgYSVmUkz/1/AIYAM4DSN806C4vInOxOuML0wXAcM9RaOYAxVrXzGsnHewYNvOYYYMZ5kjk7LDhDIcgyiEraHKouUWijguuVeS+JuZuoOhvRrgSGA20LODLMoDFHA/9sSilk80VL4vWy2QEPCjSudYuqhZfkAg4x0hggBGJgLXtbEUIlngqIOLQfdVBcQosC4jAE6cPZYDsC6dT8td9xgkAgUBKvnhBGcqLraoGgHkyULSGl65oNRgBG99q17B9QkQFGiYJGo2RxJ4PwWqw2ICH+WvFOnKG3+FQFCJFlxz3q5njw9yxABYu6LA3ASRHop3+gdtw1Hv0KJIQI6Wl8liQyujUIynZIrmiorGR2eHh6p/7xS95hvahu/iG4C9s5fKztlxbLzel7WYwDH861Bc63B5fl/avVxiip4Qv5ek3opDykiudUfTzHwOk7vfdht67w59+uP14NV2TEjOwZCweJ78dLATfCXn1CcS8j0ntuqmU9hpnGIBlJrd+fCmccUJJBEmOCQOq/+7NC3/hydUXnt8hIFy0k2f3qJH1ES8bLyv+wNZeNVdu/1xMZ352Z6+e4D99/jwHePGPOg/0TEMfVXBo6mmHydbm3e++vbd3LjCN+Zckt14218fXX37n5je0M1cvbe0sb2ygxP+XTJnZjz/79ea/zfoPmrxX/fCo28YAAAAASUVORK5CYII=",size:[32,16],imageSize:[32,16],offset:[-5,-8]},l[y.lorryType.boat]={image:"data:image/png;base64,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",size:[36,12],imageSize:[36,12],offset:[-9,-4]},l)},Z=new WeakMap,Y=new WeakMap,_=new WeakMap,$=new WeakMap,ee=function(a,o){return z(a).then(function(e){var n=e[0],t=e[1];if(!a.getInfoWindowContent)return Promise.reject("Don't known how to show the info window");var i=a.getInfoWindowContent(o),e=null;return $.has(a.amapResolve)?(e=$.get(a.amapResolve)).setContent(i):(e=new n.InfoWindow({content:i,offset:new n.Pixel(0,-8)}),$.set(a.amapResolve,e)),[e,n,t]})},l=Object.freeze({__proto__:null,loadUnload:s,tracking:Object.freeze({__proto__:null,removeTrackLine:R,drawTrackLine:D,getValidPathArray:L,getTrackParts:B,drawTrackPassPoint:F,drawLorryMove:j,moveLorryTo:M,showInfoWindowOfPoint:V,hideInfoWindow:N}),base:d}),s={name:"AmapRoute",components:{log:c},props:{className:String,loadPoint:Array,unloadPoint:Array,loadRule:Function,unloadRule:Function,amap:null,avoid:{type:Array,default:function(){return[10,10,10,10]}}},data:function(){return{amapResolve:null,amapId:n.uuid(),containerResolve:null}},mounted:function(){var e=this;e.amap&&(e.amapResolve||(e.amapResolve=Promise.resolve(e.amap)),e.drawRoute())},updated:function(){var e=this;e.amap&&(e.amapResolve||(e.amapResolve=Promise.resolve(e.amap)),e.drawRoute())},methods:{drawRoute:function(){var n=this;I(n).then(function(e){n.$emit("drawRoute",e)}).catch(function(e){console.log(e)})}}},d=function(){var e=this,n=e.$createElement;return(e._self._c||n)("div",{class:e.className,attrs:{id:e.amapId}},[e._e()],1)},ne=(d._withStripped=!0,t({render:d,staticRenderFns:[]},void 0,s,void 0,!1,void 0,!1,void 0,void 0,void 0)),te={primary:"info",info:"primary"},ie=y.deviceMapping,c={name:"WaybillTrack",props:{trackInfo:{type:Object,default:function(){return{}}},baseInfo:{type:Object,default:function(){return{}}},selectedPoint:Object,showDriverInfo:{type:Boolean,default:!0},driverInfo:{type:Object,default:function(){return{}}},amap:null,loadPoint:Array,unloadPoint:Array,showTrackType:{type:Number,default:y.pathType.full},trackVehicleColor:{type:String,default:"#2288FF"},trackDriverColor:{type:String,default:"#D01F1F"},trackUnionColor:{type:String,default:"#2288FF"},showPlayBack:{type:Boolean,default:!0},vehicleType:{type:String,default:"lorry"},moveTriggerInfoWindow:{type:Boolean,default:!0},isRunning:{type:Boolean,default:!1}},data:function(){return{meta:{loading:!1},amapId:n.uuid(),amapResolve:null,containerResolve:null,trackTypeOfVehicle:"primary",trackTypeOfDriver:"primary",trackPath:{},focusedPoint:null}},computed:{disablePlayTrack:function(){return(!(!this.driverActive||!this.showDriverTrack)+!(!this.vehicleActive||!this.showVehicleTrack))%2==0},showUnionTrack:function(){return this.showTrackType==y.pathType.union},showDriverTrack:function(){return this.showTrackType&y.pathType.driver},showVehicleTrack:function(){return this.showTrackType&y.pathType.vehicle},driverActive:function(){return"primary"==this.trackTypeOfDriver},vehicleActive:function(){return"primary"==this.trackTypeOfVehicle}},mounted:function(){var e=this;g(e).then(function(){e.drawTrackAll()})},updated:function(){var e=this;g(e).then(function(){e.drawTrackAll()})},methods:{getAciontRange:function(){var e=this.trackInfo&&this.trackInfo.driverOperate;return[O(e,2),O(e,3)]},drawTrackAll:function(){var i=this;I(i).then(function(e){var n=i.getAciontRange(),t=n[0],n=n[1];return Promise.all([E(i,t,n),t,n])}).then(function(e){e[0];var n=e[1],e=e[2];i.drawTrackPath(n,e)}).then(function(e){return console.log("selectedPoint",i.selectedPoint),i.selectedPoint?V(i,i.selectedPoint):N(i)}).catch(function(e){console.log(e)})},drawTrackPath:function(e,n){var i=this,t=i.trackPath,a=i.trackInfo&&i.trackInfo.realtime.slice()||[],a=[n].concat(a).concat([e]).reverse(),e=function(e,n,t){return void 0===t&&(t="lines"),L(i,e).then(function(e){e=B(e);D(i,e,n,t),F(i,e)})};return(i.showUnionTrack||i.showDriverTrack)&&(i.driverActive?t.driver=e(a.filter(function(e){return e.origin==y.pointType.app}),i.trackDriverColor,"driver"):R(i,"driver")),(i.showUnionTrack||i.showVehicleTrack)&&(i.vehicleActive?t.vehicle=e(a.filter(function(e){return e.origin!=y.pointType.app}),i.trackVehicleColor,"vehicle"):R(i,"vehicle")),Promise.all([t.all,t.driver,t.vehicle])},handlePlayback:function(){var n=this;n.focusedPoint=null;var e=n.trackInfo&&n.trackInfo.realtime.slice()||[],t=n.showDriverTrack&&n.driverActive,i=n.showVehicleTrack&&n.vehicleActive;return n.showUnionTrack||t&&i?L(n,e).then(function(e){return j(n,e,n.vehicleType)}):t?L(n,e.filter(function(e){return e.origin==y.pointType.app})).then(function(e){return j(n,e,n.vehicleType)}):i?L(n,e.filter(function(e){return e.origin!=y.pointType.app})).then(function(e){return j(n,e,n.vehicleType)}):void 0},changeTrack:function(e){var n=this,t=n.getAciontRange(),i=t[0],a=t[1];switch(e){case"vehicle":n.trackTypeOfVehicle=te[n.trackTypeOfVehicle],n.drawTrackPath(i,a);break;case"driver":n.trackTypeOfDriver=te[n.trackTypeOfDriver],n.drawTrackPath(i,a);break;default:return}},getInfoWindowContent:function(e){var n=[];return e.velocity&&(n=['<div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">速度</div><span style="font-size:12px">',e.velocityLabel,"</span></div>"]),['\n      <div style="width:220px;padding:8px">\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">经度</div><span style="font-size:12px">'+(+e.lng||0).toFixed(6)+'</span></div>\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">纬度</div><span style="font-size:12px">'+(+e.lat||0).toFixed(6)+'</span></div>\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">时间</div><span style="font-size:12px">'+e.trackTimeLabel+'</span></div>\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">设备</div><span style="font-size:12px">'+ie[e.origin]+"</span></div>\n        "+n.join("")+"\n      ",this.baseInfo&&4!=this.baseInfo.type?'\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;"><div style="width:30px;font-size:12px;">实时位置</div></div><div style="flex:1"><span style="font-size:12px">'+e.addressInfo+"</span></div></div>\n      ":"","\n      </div>\n      "].join("")},moveToEnd:function(e){var n=this;n.focusedPoint=e;var t=n.trackInfo&&n.trackInfo.realtime.slice()||[];switch(e){case"driver":return L(n,t.filter(function(e){return e.origin==y.pointType.app})).then(function(e){return M(n,e,n.vehicleType)});case"vehicle":return L(n,t.filter(function(e){return e.origin!=y.pointType.app})).then(function(e){return M(n,e,n.vehicleType)})}}}},d=c,s=function(){var n=this,e=n.$createElement,e=n._self._c||e;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.meta.loading,expression:"meta.loading"}],staticClass:"track-amap-container"},[e("div",{staticClass:"track-amap height-100p min-height-700",attrs:{id:n.amapId,trackInfo:n.trackInfo,selectedPoint:n.selectedPoint}}),n._v(" "),n.showDriverInfo?e("div",{staticClass:"driver-info"},[n._m(0),n._v(" "),e("div",{staticClass:"user-info"},[e("span",{staticClass:"user-name"},[n._v(n._s(n.driverInfo.driverName))]),n._v(" "),e("span",{staticClass:"user-phone"},[n._v(n._s(n.driverInfo.driverPhone))]),n._v(" "),e("div",{staticClass:"user-phone plate-code"},[e("span",[n._v(n._s(n.driverInfo.carPlate))])])]),n._v(" "),e("div",{staticClass:"track-playback"},[n.showPlayBack?e("el-button",{staticClass:"trackbutton margin-bottom-8",attrs:{disabled:n.disablePlayTrack,plain:"",type:"default",size:"mini"},on:{click:n.handlePlayback}},[n._v("轨迹回放")]):n._e()],1)]):n._e(),n._v(" "),e("div",{staticClass:"track-tabs"},[e("div",{staticClass:"flex-row"},[n.showDriverTrack?e("el-button",{staticStyle:{width:"116px"},attrs:{type:n.trackTypeOfVehicle,size:"mini"},on:{click:function(e){return n.changeTrack("vehicle")}}},[n._v("车辆轨迹")]):n._e(),n._v(" "),n.showVehicleTrack?e("el-button",{staticStyle:{width:"116px"},attrs:{type:n.trackTypeOfDriver,size:"mini"},on:{click:function(e){return n.changeTrack("driver")}}},[n._v("司机轨迹")]):n._e()],1),n._v(" "),e("div",{staticClass:"flex-row padding-top-4"},[n.showDriverTrack?e("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){return n.moveToEnd("vehicle")}}},[n._v("车辆实时位置")]):n._e(),n._v(" "),n.showVehicleTrack?e("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){return n.moveToEnd("driver")}}},[n._v("司机实时位置")]):n._e()],1)])])},c=[function(){var e=this.$createElement,e=this._self._c||e;return e("div",{staticClass:"user-avatar"},[e("img",{attrs:{src:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='52px' height='52px' viewBox='0 0 52 52' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3ctitle%3e%e7%bc%96%e7%bb%84 4%3c/title%3e %3cdefs%3e %3clinearGradient x1='-12.313058%25' y1='-14.7070312%25' x2='109.143415%25' y2='108.638393%25' id='linearGradient-1'%3e %3cstop stop-color='%23F1DCC4' offset='0%25'%3e%3c/stop%3e %3cstop stop-color='%23AE9484' offset='100%25'%3e%3c/stop%3e %3c/linearGradient%3e %3crect id='path-2' x='0' y='0' width='52' height='52' rx='3.57142857'%3e%3c/rect%3e %3cpath d='M22.1207049%2c27.7447245 C25.7254001%2c27.7447245 28.565433%2c24.7734665 29.6418686%2c22.5208687 C31.1577996%2c19.3485629 31.4216947%2c13.8438427 31.4216947%2c9.53771013 C31.4216947%2c1.66531625 26.0844392%2c1.9356158 21.6270304%2c1.9356158 C17.1696215%2c1.9356158 12.7759675%2c1.66531625 12.7759675%2c9.53771013 C12.7759675%2c13.8803566 13.0253319%2c19.3517497 14.5858142%2c22.5208687 C15.856767%2c25.1019943 18.5160098%2c27.7447245 22.1207049%2c27.7447245 Z' id='path-4'%3e%3c/path%3e %3c/defs%3e %3cg id='2020.04.03--%e5%9c%b0%e5%9b%be%e4%bc%98%e5%8c%96' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='A4-1--2-%e8%bf%90%e5%8d%95%e8%bd%a8%e8%bf%b9-%e5%ae%9e%e6%97%b6%e8%bd%a8%e8%bf%b9' transform='translate(-286.000000%2c -579.000000)'%3e %3cg id='%e7%bc%96%e7%bb%84-4' transform='translate(286.000000%2c 579.000000)'%3e %3cmask id='mask-3' fill='white'%3e %3cuse xlink:href='%23path-2'%3e%3c/use%3e %3c/mask%3e %3cuse id='%e8%92%99%e7%89%88' fill='url(%23linearGradient-1)' xlink:href='%23path-2'%3e%3c/use%3e %3cg id='%e7%bc%96%e7%bb%84-11' mask='url(%23mask-3)'%3e %3cg transform='translate(3.714286%2c 7.239230)'%3e %3cpath d='M5.59704302%2c36.0225499 C11.1756725%2c31.9513992 16.7077196%2c29.9158238 22.1931845%2c29.9158238 C27.7082279%2c29.9158238 33.2157485%2c31.9734106 38.7157465%2c36.0885843 C40.5745998%2c37.4793988 41.9314169%2c39.4363531 42.581989%2c41.6649079 L44.3089983%2c47.5808312 L44.3089983%2c47.5808312 L5.27831747e-14%2c47.5808312 L1.58343856%2c41.8320749 C2.22642151%2c39.4976789 3.64115899%2c37.4499074 5.59704302%2c36.0225499 Z' id='Rectangle%e5%a4%87%e4%bb%bd-11' stroke='none' fill='%23A88269' fill-rule='evenodd'%3e%3c/path%3e %3cpath d='M25.2320359%2c30.3361024 C26.0891119%2c30.0677211 26.760568%2c29.876567 27.2464041%2c29.7626402 C27.7174612%2c29.652179 28.356183%2c29.5269308 29.1625695%2c29.3868956 L29.1625776%2c29.3869425 C29.3180205%2c29.3599486 29.4659148%2c29.4640771 29.4929086%2c29.61952 C29.4938488%2c29.6249338 29.4946325%2c29.6303736 29.4952589%2c29.6358326 C29.7854488%2c32.1649064 29.9305437%2c34.9799924 29.9305437%2c38.0810905 C29.9305437%2c41.3053471 29.6273402%2c44.0509031 29.0209334%2c46.3177587 L24.2856429%2c50.8905755 C25.0166065%2c45.6204602 25.3820884%2c41.4281165 25.3820884%2c38.3135446 C25.3820884%2c35.3102943 25.2658659%2c32.7524563 25.033421%2c30.6400308 L25.0334015%2c30.640033 C25.0184625%2c30.5042694 25.1016938%2c30.3769172 25.2320359%2c30.3361024 Z' id='%e7%9f%a9%e5%bd%a2' stroke='none' fill='%234E3838' fill-rule='evenodd' transform='translate(27.108093%2c 40.113219) rotate(44.000000) translate(-27.108093%2c -40.113219) '%3e%3c/path%3e %3cpolygon id='Rectangle%e5%a4%87%e4%bb%bd-13' stroke='none' fill='%23FFDAC2' fill-rule='evenodd' points='17.778095 22.0361607 26.7933336 22.0361607 26.6352769 32.1572719 18.0816288 32.1572719'%3e%3c/polygon%3e %3cpath d='M17.9132764%2c30.0950182 C19.0827529%2c31.1786715 20.5811384%2c31.7204982 22.4084328%2c31.7204982 C24.2099068%2c31.7204982 25.5784294%2c31.215928 26.5140005%2c30.2067876 C26.6326397%2c30.0787273 26.8171048%2c30.0354764 26.980324%2c30.0973971 L28.1441118%2c30.5389048 C28.2548882%2c30.580777 28.3105964%2c30.7045905 28.2685903%2c30.8153162 C28.2611579%2c30.8349075 28.250894%2c30.8533036 28.238126%2c30.869918 C26.9348872%2c32.5657574 24.9916562%2c33.4136771 22.4084328%2c33.4136771 C19.8269576%2c33.4136771 17.7280875%2c32.5473895 16.1118225%2c30.8148142 C16.0311948%2c30.7282508 16.0359023%2c30.592712 16.1224035%2c30.5120177 C16.1436322%2c30.4922141 16.1686652%2c30.4769328 16.1959817%2c30.4671019 L17.4768561%2c30.0061311 C17.6275119%2c29.9519064 17.7958291%2c29.9861898 17.9132764%2c30.0950182 Z' id='%e8%b7%af%e5%be%84-21%e5%a4%87%e4%bb%bd' stroke='none' fill='%23CFAB8E' fill-rule='evenodd'%3e%3c/path%3e %3cpath d='M12.4947703%2c19.1782786 C14.1143741%2c19.3485058 15.5975922%2c17.8664933 15.7902702%2c16.0332846 C15.9829482%2c14.200076 14.7121412%2c13.661132 13.0925373%2c13.4909047 C11.4729335%2c13.3206775 10.1178439%2c13.5836287 9.92516593%2c15.4168373 C9.73248793%2c17.250046 10.8751664%2c19.0080514 12.4947703%2c19.1782786 Z' id='Oval%e5%a4%87%e4%bb%bd' stroke='none' fill='%23FFDAC2' fill-rule='evenodd'%3e%3c/path%3e %3cpath d='M31.7028919%2c19.1782786 C30.0832881%2c19.3485058 28.60007%2c17.8664933 28.407392%2c16.0332846 C28.214714%2c14.200076 29.485521%2c13.661132 31.1051249%2c13.4909047 C32.7247287%2c13.3206775 34.0798183%2c13.5836287 34.2724963%2c15.4168373 C34.4651743%2c17.250046 33.3224958%2c19.0080514 31.7028919%2c19.1782786 Z' id='Oval%e5%a4%87%e4%bb%bd-2' stroke='none' fill='%23FFDAC2' fill-rule='evenodd'%3e%3c/path%3e %3cmask id='mask-5' fill='white'%3e %3cuse xlink:href='%23path-4'%3e%3c/use%3e %3c/mask%3e %3cuse id='%e8%92%99%e7%89%88' stroke='none' fill='%23FFE7D6' fill-rule='evenodd' xlink:href='%23path-4'%3e%3c/use%3e %3cpath d='M23.1353149%2c18.7568947 C23.3427459%2c17.6638684 22.8984572%2c16.2390176 22.4833281%2c15.5891022 C22.3430834%2c15.3695386 21.8605422%2c15.3656585 21.7235133%2c15.5790553 C21.3077097%2c16.226591 20.8575369%2c17.6674459 21.059513%2c18.7538274 C21.1057483%2c19.002516 23.0943996%2c18.9724917 23.1353149%2c18.7568947 Z' id='%e6%a4%ad%e5%9c%86%e5%bd%a2%e5%a4%87%e4%bb%bd-7' stroke='none' fill='%23FBD3B9' fill-rule='evenodd'%3e%3c/path%3e %3cpath d='M20.2123289%2c21.9654824 C20.7987034%2c22.3201607 21.4863308%2c22.5242881 22.2216347%2c22.5242881 C22.9332852%2c22.5242881 23.6002772%2c22.3330823 24.1740402%2c21.9992414' id='%e8%b7%af%e5%be%84%e5%a4%87%e4%bb%bd-5' stroke='%23EE9585' stroke-width='0.857142857' fill='none' stroke-linecap='round'%3e%3c/path%3e %3cpath d='M12.8459583%2c14.0776 C12.5412311%2c13.6536928 12.0974331%2c13.466828 11.5145645%2c13.5170059 C11.3937709%2c12.1889509 11.0380542%2c6.60754063 12.7759675%2c3.84813058 C14.3666504%2c1.32248884 17.0277581%2c5.03089633e-14 22.061829%2c5.03089633e-14 C26.6055558%2c5.03089633e-14 29.7540039%2c1.27869001 31.3063946%2c3.84813058 C32.7761508%2c6.2807986 32.9449707%2c12.2186035 32.7849923%2c13.5485105 C32.1323012%2c13.4932268 31.6394353%2c13.6695899 31.3063946%2c14.0776 C31.3063946%2c11.9349587 29.8240095%2c8.30980748 29.1999442%2c7.87816685 C28.5758789%2c7.44652623 28.5758789%2c8.37600446 22.0988311%2c8.50332031 C15.6217833%2c8.63063616 15.0919608%2c7.51929757 14.5972934%2c7.87816685 C14.1026259%2c8.23703613 12.7936538%2c11.9349587 12.8459583%2c14.0776 Z' id='%e8%b7%af%e5%be%84-19%e5%a4%87%e4%bb%bd' stroke='none' fill='%2348433D' fill-rule='evenodd'%3e%3c/path%3e %3cpath d='M6.93500056%2c44.9290737 C7.18165235%2c42.6286135 8.02144727%2c40.7585486 8.35415514%2c40.8879048 C8.68686301%2c41.017261 8.35112208%2c43.2534042 8.61953251%2c44.9290737 C8.61953251%2c44.9290737 6.93500056%2c44.9290737 6.93500056%2c44.9290737 Z' id='%e8%b7%af%e5%be%84-22' stroke='none' fill='%23966D52' fill-rule='evenodd'%3e%3c/path%3e %3cpath d='M35.2447767%2c44.9290737 C35.4914284%2c42.6286135 36.3312234%2c40.7585486 36.6639312%2c40.8879048 C36.9966391%2c41.017261 36.6608982%2c43.2534042 36.9293086%2c44.9290737 C36.9293086%2c44.9290737 35.2447767%2c44.9290737 35.2447767%2c44.9290737 Z' id='%e8%b7%af%e5%be%84-22' stroke='none' fill='%23966D52' fill-rule='evenodd' transform='translate(36.087043%2c 42.905324) scale(-1%2c 1) translate(-36.087043%2c -42.905324) '%3e%3c/path%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e",alt:""}})])}],ae=(s._withStripped=!0,t({render:s,staticRenderFns:c},function(e){e&&e("data-v-5a562622_0",{source:"\n.track-amap-container {\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  background: coral;\n}\n.track-amap {\n  min-width: 200px;\n  min-height: 200px;\n  flex: 1;\n}\n.driver-info {\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  padding:8px;\n  border-radius:4px;\n  background:#ffffffa0;\n  display:flex;\n  flex-direction: row;\n  align-items: center;\n}\n.track-tabs {\n  background: transparent;\n  position: absolute;\n  top: 120px;\n  left: 20px;\n}\n.user-avatar {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  margin-right: 10px;\n}\n.user-avatar img {\n  width: 100%;\n  height: 100%;\n  opacity: 0.95;\n}\n.user-info {\n  width: 180px;\n  height: 60px;\n  padding: 0 10px;\n  color:#000000a0;\n}\n.user-name {\n  margin-right: 10px;\n}\n.user-phone {\n  line-height: 30px;\n}\n.plate-code >span {\n  background-color: #FAECD880;\n  padding:0 4px;\n  color: #61503A;\n  border-radius: 2px;\n}\n.height-100p {\n  height: 100%;\n}\n.min-height-400 {\n  min-height: 400px;\n}\n.min-height-700 {\n  min-height: 700px;\n}\n.amap-logo,\n.amap-copyright {\n  display: none !important;\n}\n.track-playback {\n  color:#000000a0;\n  display: flex;\n  flex-direction:column;\n  padding: 0 10px;\n  align-items: center;\n  justify-content:space-between;\n}\n.track-playback .el-button + .el-button {\n  margin-left:0;\n}\n.el-button.trackbutton {\n  background-color: #ffffff80;\n  border-color: #409EFF40;\n  color:#409EFF;\n  border-radius: 6px;\n  padding-bottom:5px !important;\n  padding-top:5px !important;\n}\n.trackbutton > span {\n  font-size: 12px;\n  font-weight: 700;\n  background: transparent;\n}\n.el-button.trackbutton:hover {\n  background-color: #409EFF18;\n  border-color: #409EFF00;\n  box-shadow: unset;\n}\n",map:{version:3,sources:["/media/liuhanru/mywork/apps/dayi/admin-widget/src/waybill/WaybillTrack.vue"],names:[],mappings:";AA0PA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,iBAAA;AACA;AACA;EACA,gBAAA;EACA,iBAAA;EACA,OAAA;AACA;AACA;EACA,kBAAA;EACA,SAAA;EACA,UAAA;EACA,WAAA;EACA,iBAAA;EACA,oBAAA;EACA,YAAA;EACA,mBAAA;EACA,mBAAA;AACA;AACA;EACA,uBAAA;EACA,kBAAA;EACA,UAAA;EACA,UAAA;AACA;AACA;EACA,WAAA;EACA,YAAA;EACA,kBAAA;EACA,kBAAA;AACA;AACA;EACA,WAAA;EACA,YAAA;EACA,aAAA;AACA;AACA;EACA,YAAA;EACA,YAAA;EACA,eAAA;EACA,eAAA;AACA;AACA;EACA,kBAAA;AACA;AACA;EACA,iBAAA;AACA;AACA;EACA,2BAAA;EACA,aAAA;EACA,cAAA;EACA,kBAAA;AACA;AACA;EACA,YAAA;AACA;AACA;EACA,iBAAA;AACA;AACA;EACA,iBAAA;AACA;AACA;;EAEA,wBAAA;AACA;AACA;EACA,eAAA;EACA,aAAA;EACA,qBAAA;EACA,eAAA;EACA,mBAAA;EACA,6BAAA;AACA;AACA;EACA,aAAA;AACA;AACA;EACA,2BAAA;EACA,uBAAA;EACA,aAAA;EACA,kBAAA;EACA,6BAAA;EACA,0BAAA;AACA;AACA;EACA,eAAA;EACA,gBAAA;EACA,uBAAA;AACA;AACA;EACA,2BAAA;EACA,uBAAA;EACA,iBAAA;AACA",file:"WaybillTrack.vue",sourcesContent:['<template>\n  <div class="track-amap-container" v-loading="meta.loading">\n    <div class="track-amap height-100p min-height-700" :id="amapId" :trackInfo="trackInfo" :selectedPoint="selectedPoint"></div>\n    <div class="driver-info" v-if="showDriverInfo">\n      <div class="user-avatar">\n        <img src="./assets/carrior_portrait.svg" alt />\n      </div>\n      <div class="user-info">\n        <span class="user-name">{{driverInfo.driverName}}</span>\n        <span class="user-phone">{{driverInfo.driverPhone}}</span>\n        <div class="user-phone plate-code"><span>{{driverInfo.carPlate}}</span></div>\n      </div>\n      <div class="track-playback">\n        <el-button v-if="showPlayBack" :disabled="disablePlayTrack" plain type="default" size="mini" @click="handlePlayback" class="trackbutton margin-bottom-8">轨迹回放</el-button>\n        \x3c!-- <el-button \n         plain type="default" size="mini" @click="refreshTrack" class="trackbutton margin-bottom-8"\n         v-if="baseInfo.waybillStatus == 3"\n        >实时位置</el-button> --\x3e\n      </div>\n    </div>\n    <div class="track-tabs">\n      <div class="flex-row" v-if="true">\n        <el-button style="width:116px" v-if="showDriverTrack" :type="trackTypeOfVehicle" size="mini" @click="changeTrack(\'vehicle\')">车辆轨迹</el-button>\n        <el-button style="width:116px" v-if="showVehicleTrack" :type="trackTypeOfDriver" size="mini" @click="changeTrack(\'driver\')">司机轨迹</el-button>\n      </div>\n      <div class="flex-row padding-top-4" v-if="true">\n        <el-button v-if="showDriverTrack" type="default" size="mini" @click="moveToEnd(\'vehicle\')">车辆实时位置</el-button>\n        <el-button v-if="showVehicleTrack" type="default" size="mini" @click="moveToEnd(\'driver\')">司机实时位置</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as simpleUUIdv4 from \'simple-uuidv4\';\nimport * as mapUtils from \'./lib/map.utils.js\';\nconst typeSwitch = {\n  primary:\'info\', info:\'primary\'\n};\nconst deviceMapping = mapUtils.base.glossary.deviceMapping;\nexport default {\n  name:\'WaybillTrack\',\n  props: {\n    trackInfo: { type: Object, default() { return {}; }, },\n    baseInfo: { type: Object, default() { return {}; }, },\n    selectedPoint: Object,\n    showDriverInfo: { type: Boolean, default: true, },\n    driverInfo: { type: Object, default() { return {}; }, },\n    amap: null,\n    loadPoint:Array,\n    unloadPoint:Array,\n    showTrackType:{\n      type: Number, default: mapUtils.base.glossary.pathType.full\n    },\n    trackVehicleColor:{ type:String, default:"#2288FF", },\n    trackDriverColor:{ type:String, default:"#D01F1F", },\n    trackUnionColor:{ type:String, default:"#2288FF", },\n    showPlayBack:{ type:Boolean, default:true },\n    vehicleType:{ type:String, default:\'lorry\', },\n    moveTriggerInfoWindow:{ type:Boolean, default: true, },\n    isRunning:{ type:Boolean, default:false, },\n  },\n  data(){\n    const uuid = simpleUUIdv4.uuid();\n    return {\n      meta: {\n        loading: false,\n      },\n      amapId: uuid,\n      amapResolve: null,\n      containerResolve: null,\n      trackTypeOfVehicle:\'primary\',\n      trackTypeOfDriver:\'primary\',\n      trackPath:{},\n      focusedPoint:null,\n    } \n  },\n  computed:{\n    disablePlayTrack() {\n      const vue = this;\n      const moveDriver = !!(vue.driverActive && vue.showDriverTrack);\n      const moveVehicle = !!(vue.vehicleActive && vue.showVehicleTrack);\n      const disabled = (moveDriver + moveVehicle)%2 == 0;\n      return disabled;\n    },\n    showUnionTrack(){\n      const vue = this;\n      return vue.showTrackType == mapUtils.base.glossary.pathType.union;\n    },\n    showDriverTrack() {\n      const vue = this;\n      return (vue.showTrackType & mapUtils.base.glossary.pathType.driver);\n    },\n    showVehicleTrack(){\n      const vue = this;\n      return (vue.showTrackType & mapUtils.base.glossary.pathType.vehicle);\n    },\n    driverActive() {\n      const vue = this;\n      return vue.trackTypeOfDriver == \'primary\';\n    },\n    vehicleActive() {\n      const vue = this;\n      return vue.trackTypeOfVehicle == \'primary\';\n    },\n  },\n  mounted() {\n    const vue = this;\n    mapUtils.base.callOnInitLifeCircle(vue).then(()=>{\n      vue.drawTrackAll();\n    });\n  },\n  updated() {\n    const vue = this;\n    mapUtils.base.callOnInitLifeCircle(vue).then(()=>{\n      vue.drawTrackAll();      \n    })\n  },\n  methods: {\n    getAciontRange(){\n      const vue = this;\n      const driverAction = vue.trackInfo && vue.trackInfo.driverOperate;\n      const startPoint = mapUtils.loadUnload.findDriverAction(driverAction, 2);\n      const endPoint = mapUtils.loadUnload.findDriverAction(driverAction, 3);\n      return [startPoint, endPoint];\n    },\n    drawTrackAll() {\n      const vue = this;\n      mapUtils.loadUnload.renderTheRoute(vue).then(ok => {\n        const [startPoint, endPoint] = vue.getAciontRange();\n        return Promise.all([mapUtils.loadUnload.renderTheAction(vue, startPoint, endPoint), startPoint, endPoint]);\n      }).then(([ok, startPoint, endPoint]) => {\n        vue.drawTrackPath(startPoint, endPoint);\n      }).then(ok => {\n        console.log(\'selectedPoint\', vue.selectedPoint);\n        if(!vue.selectedPoint) return mapUtils.tracking.hideInfoWindow(vue);\n        return mapUtils.tracking.showInfoWindowOfPoint(vue, vue.selectedPoint);\n      }).catch(err=>{\n        console.log(err);\n      });\n    },\n    drawTrackPath(startPoint, endPoint) {\n      const vue = this;\n      const trackPath =  vue.trackPath;\n      const copy = vue.trackInfo && vue.trackInfo.realtime.slice() || [];\n      const realtime = [endPoint].concat(copy).concat([startPoint]).reverse();\n      const drawTrackPathHandle = (pathArray, pathColor, category="lines") => {\n        return mapUtils.tracking.getValidPathArray(vue, pathArray).then((paths) => {\n          const trackParts = mapUtils.tracking.getTrackParts(paths);\n          mapUtils.tracking.drawTrackLine(vue, trackParts, pathColor, category);\n          mapUtils.tracking.drawTrackPassPoint(vue, trackParts);\n        });\n      };\n      if ((vue.showUnionTrack || vue.showDriverTrack)) {\n        if(vue.driverActive) {\n          trackPath.driver = drawTrackPathHandle(realtime.filter(ele=> ele.origin == mapUtils.base.glossary.pointType.app), vue.trackDriverColor, \'driver\');          \n        } else {\n          mapUtils.tracking.removeTrackLine(vue, \'driver\')\n        }\n      };\n      if ((vue.showUnionTrack || vue.showVehicleTrack)) {\n        if(vue.vehicleActive) {\n          trackPath.vehicle = drawTrackPathHandle(realtime.filter(ele=> ele.origin != mapUtils.base.glossary.pointType.app), vue.trackVehicleColor, \'vehicle\');\n        } else {\n          mapUtils.tracking.removeTrackLine(vue, \'vehicle\')\n        }\n      };\n      return Promise.all([trackPath.all, trackPath.driver, trackPath.vehicle]);\n    },\n    handlePlayback() {\n      const vue = this;\n      vue.focusedPoint = null;\n      const realtime = vue.trackInfo && vue.trackInfo.realtime.slice() || [];\n      const willMoveDriver = vue.showDriverTrack && vue.driverActive;\n      const willMoveVehicle = vue.showVehicleTrack && vue.vehicleActive;\n      const willMoveOnUnion = vue.showUnionTrack || (willMoveDriver && willMoveVehicle);\n      if (willMoveOnUnion) {\n        return mapUtils.tracking.getValidPathArray(vue, realtime).then((paths) => {\n          return mapUtils.tracking.drawLorryMove(vue, paths, vue.vehicleType);\n        });\n      } else if (willMoveDriver) {\n        return mapUtils.tracking.getValidPathArray(vue, realtime.filter(ele => ele.origin == mapUtils.base.glossary.pointType.app)).then((paths) => {\n          return mapUtils.tracking.drawLorryMove(vue, paths, vue.vehicleType);\n        });\n      } else if (willMoveVehicle) {\n        return mapUtils.tracking.getValidPathArray(vue, realtime.filter(ele => ele.origin != mapUtils.base.glossary.pointType.app)).then((paths) => {\n          return mapUtils.tracking.drawLorryMove(vue, paths, vue.vehicleType);\n        });\n      }\n    },\n    changeTrack(target){\n      const vue = this;\n      const [startPoint, endPoint] = vue.getAciontRange();\n      switch(target) {\n      case \'vehicle\':\n        vue.trackTypeOfVehicle = typeSwitch[vue.trackTypeOfVehicle];\n        vue.drawTrackPath(startPoint, endPoint);\n        break;\n      case \'driver\':\n        vue.trackTypeOfDriver = typeSwitch[vue.trackTypeOfDriver];\n        vue.drawTrackPath(startPoint, endPoint);\n        break;\n      default:\n        return;\n      }\n    },\n    getInfoWindowContent(trackInfo){\n      const vue = this;\n      let velocity = [];\n      // console.log(\'velocity in track\', trackInfo);\n      if (trackInfo.velocity) {\n        velocity=[\n          \'<div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">速度</div><span style="font-size:12px">\',\n          trackInfo.velocityLabel,\n          \'</span></div>\'\n        ];\n      };\n      return [`\n      <div style="width:220px;padding:8px">\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">经度</div><span style="font-size:12px">${(trackInfo.lng*1 || 0).toFixed(6)}</span></div>\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">纬度</div><span style="font-size:12px">${(trackInfo.lat*1 || 0).toFixed(6)}</span></div>\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">时间</div><span style="font-size:12px">${trackInfo.trackTimeLabel}</span></div>\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;font-size:12px">设备</div><span style="font-size:12px">${deviceMapping[trackInfo.origin]}</span></div>\n        ${velocity.join(\'\')}\n      `, vue.baseInfo && vue.baseInfo.type != 4 ?`\n        <div style="display:flex;padding-top:4px;"><div style="width:60px;text-align:left;"><div style="width:30px;font-size:12px;">实时位置</div></div><div style="flex:1"><span style="font-size:12px">${trackInfo.addressInfo}</span></div></div>\n      `:\'\',`\n      </div>\n      `].join(\'\');\n    },\n    moveToEnd(type){\n      const vue = this;\n      vue.focusedPoint = type;\n      const realtime = vue.trackInfo && vue.trackInfo.realtime.slice() || [];\n      switch(type) {\n      case "driver":\n        return mapUtils.tracking.getValidPathArray(vue, realtime.filter(ele => ele.origin == mapUtils.base.glossary.pointType.app)).then((paths) => {\n          return mapUtils.tracking.moveLorryTo(vue, paths, vue.vehicleType);\n        });\n      case "vehicle":\n        return mapUtils.tracking.getValidPathArray(vue, realtime.filter(ele => ele.origin != mapUtils.base.glossary.pointType.app)).then((paths) => {\n          return mapUtils.tracking.moveLorryTo(vue, paths, vue.vehicleType);\n        });\n      };\n    }\n  }\n}\n<\/script>\n\n<style>\n.track-amap-container {\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  background: coral;\n}\n.track-amap {\n  min-width: 200px;\n  min-height: 200px;\n  flex: 1;\n}\n.driver-info {\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  padding:8px;\n  border-radius:4px;\n  background:#ffffffa0;\n  display:flex;\n  flex-direction: row;\n  align-items: center;\n}\n.track-tabs {\n  background: transparent;\n  position: absolute;\n  top: 120px;\n  left: 20px;\n}\n.user-avatar {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  margin-right: 10px;\n}\n.user-avatar img {\n  width: 100%;\n  height: 100%;\n  opacity: 0.95;\n}\n.user-info {\n  width: 180px;\n  height: 60px;\n  padding: 0 10px;\n  color:#000000a0;\n}\n.user-name {\n  margin-right: 10px;\n}\n.user-phone {\n  line-height: 30px;\n}\n.plate-code >span {\n  background-color: #FAECD880;\n  padding:0 4px;\n  color: #61503A;\n  border-radius: 2px;\n}\n.height-100p {\n  height: 100%;\n}\n.min-height-400 {\n  min-height: 400px;\n}\n.min-height-700 {\n  min-height: 700px;\n}\n.amap-logo,\n.amap-copyright {\n  display: none !important;\n}\n.track-playback {\n  color:#000000a0;\n  display: flex;\n  flex-direction:column;\n  padding: 0 10px;\n  align-items: center;\n  justify-content:space-between;\n}\n.track-playback .el-button + .el-button {\n  margin-left:0;\n}\n.el-button.trackbutton {\n  background-color: #ffffff80;\n  border-color: #409EFF40;\n  color:#409EFF;\n  border-radius: 6px;\n  padding-bottom:5px !important;\n  padding-top:5px !important;\n}\n.trackbutton > span {\n  font-size: 12px;\n  font-weight: 700;\n  background: transparent;\n}\n.el-button.trackbutton:hover {\n  background-color: #409EFF18;\n  border-color: #409EFF00;\n  box-shadow: unset;\n}\n</style>\n']},media:void 0})},d,void 0,!1,void 0,!1,v,void 0,void 0));function oe(e){oe.installed||(oe.installed=!0,e.component("FundTransferButton",p),e.component("FundTransferDialog",r),e.component("AmapRoute",ne),e.component("WaybillTrack",ae))}s={FundTransferButton:p,FundTransferDialog:r},c={AmapRoute:ne,WaybillTrack:ae},d=null;"undefined"!=typeof window?d=window.Vue:"undefined"!=typeof global&&(d=global.Vue),d&&d.use({install:oe}),e.fas=s,e.install=oe,e.mapUtils=l,e.waybill=c,Object.defineProperty(e,"__esModule",{value:!0})});
